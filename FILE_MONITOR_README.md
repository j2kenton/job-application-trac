# File Monitoring System for Cline/Human Change Detection

This system monitors file changes in your repository and uses sophisticated pattern analysis to distinguish between human edits and automated changes (like those made by Cline). It can automatically commit Cline's changes when they're detected with high confidence.

## 🚀 Quick Start

### Option 1: Easy Start (Windows)
1. Double-click `start-monitor.bat`
2. Answer the prompts for auto-commit and verbose output
3. The monitor will start watching for file changes

### Option 2: PowerShell Direct
```powershell
# Basic monitoring
.\scripts\advanced-file-monitor.ps1

# With auto-commit enabled
.\scripts\advanced-file-monitor.ps1 -AutoCommit

# With verbose output
.\scripts\advanced-file-monitor.ps1 -Verbose -AutoCommit
```

## 🧠 How It Works

### Pattern Detection
The system analyzes several factors to classify changes:

**🤖 Cline Patterns:**
- Very rapid changes (0.1-2 seconds between files)
- Multiple files changed in quick succession (3-50 files)
- Consistent timing patterns
- Burst patterns (rapid sequences of changes)
- Short total duration (1-10 seconds)
- Multiple file types modified simultaneously

**👤 Human Patterns:**
- Moderate timing (5-30 seconds between changes)
- Fewer files per batch (1-5 files)
- Longer editing sessions (10 seconds to 5 minutes)
- More irregular timing patterns
- Pauses between editing sessions

**💻 IDE Patterns:**
- Auto-save intervals (0.5-5 seconds)
- Consistent single-file changes
- Regular patterns from IDE features

### Confidence Scoring
Each detected pattern receives a confidence score (0-100%). The system only auto-commits when:
- Pattern is classified as "Cline"
- Confidence score > 80% (configurable)
- Auto-commit is enabled

## 📊 Features

### Real-time Classification
- **🤖 Cline**: Automated tool changes
- **👤 Human**: Manual editing
- **💻 IDE**: IDE auto-features
- **❓ Unknown**: Unclear patterns

### Smart Git Integration
- Respects `.gitignore` patterns
- Skips temporary files automatically
- Creates descriptive commit messages
- Includes detailed metadata

### Learning Mode
- First 5 minutes: Learning phase
- Builds pattern recognition
- Improves accuracy over time

## ⚙️ Configuration

### Command Line Options
```powershell
-RepositoryPath     # Path to git repository (default: current)
-AutoCommit         # Enable automatic commits for Cline changes
-Verbose            # Show detailed file change information
-LearningPeriod     # Learning period in seconds (default: 300)
-ConfidenceThreshold # Minimum confidence for auto-commit (default: 0.8)
```

### Example Usage
```powershell
# Monitor with custom settings
.\scripts\advanced-file-monitor.ps1 -AutoCommit -Verbose -ConfidenceThreshold 0.9

# Monitor different repository
.\scripts\advanced-file-monitor.ps1 -RepositoryPath "C:\path\to\other\repo" -AutoCommit
```

## 📝 Sample Output

```
🔍 Advanced File Monitor Started
📂 Repository: C:\dev\myproject
🤖 Auto-commit Cline changes: True
🎯 Confidence threshold: 80%

🤖 [Cline] 15 files changed over 3.2s (avg: 0.4s) - Confidence: 92.5%
✅ Auto-committed Cline changes

👤 [Human] 2 files changed over 45.7s (avg: 22.8s) - Confidence: 78.3%

💻 [IDE] 1 files changed over 1.0s (avg: 1.0s) - Confidence: 65.2%
```

## 🛠️ Advanced Features

### Custom Commit Messages
Auto-commits include detailed information:
```
🤖 Cline: Auto-commit 15 files (92% confidence)

Duration: 3.2s
Average interval: 0.4s
Files modified:
- src/components/NewComponent.tsx
- src/lib/utils.ts
- package.json
- README.md

Generated by file-monitor.ps1 - detected Cline activity
```

### Pattern Metrics
When verbose mode is enabled, shows:
- File type diversity
- Timing consistency
- Burst pattern count
- Confidence breakdown

### Session Summary
At the end of monitoring:
```
📊 Session Summary:
  👤 Human patterns: 12
  🤖 Cline patterns: 8
  💻 IDE patterns: 3
```

## 🔧 Troubleshooting

### Common Issues

**PowerShell Execution Policy**
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

**Not a Git Repository**
Ensure you're running the script from within a git repository root.

**Too Many False Positives**
Increase the confidence threshold:
```powershell
.\scripts\advanced-file-monitor.ps1 -ConfidenceThreshold 0.95
```

**Missing Changes**
Enable verbose mode to see all detected changes:
```powershell
.\scripts\advanced-file-monitor.ps1 -Verbose
```

## 🚫 Ignored Files

The system automatically ignores:
- Files in `.gitignore`
- `.git/` directory
- `node_modules/`
- Temporary files (`.tmp`, `.temp`, `.swp`)
- Build directories (`dist/`, `build/`)
- Environment files (`.env*`)
- VSCode settings (`.vscode/`)

## 💡 Tips

1. **Start monitoring before using Cline** - This gives the best pattern detection
2. **Use auto-commit for Cline sessions** - Keeps git history clean
3. **Review auto-commits occasionally** - Ensure accuracy
4. **Adjust confidence threshold** - Based on your workflow
5. **Use verbose mode for debugging** - Understand detection patterns

## 🔮 Future Enhancements

- Machine learning pattern improvement
- Integration with VSCode extension
- Web dashboard for monitoring
- Email/Slack notifications
- Custom pattern definitions
- Multi-repository monitoring

## 📜 License

Part of the Job Application Tracker project. See main LICENSE file.
